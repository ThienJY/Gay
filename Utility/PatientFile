package Utility;

//@author Yung Ka Leong 24SMR06234

import java.io.*;
import ADT.*;
import Entity.Patient;

public class PatientFile {
    
    private File myFile = new File("Patients.dat");
     
    public void saveToFile(QueueInterface<Patient> patientQueue){
        try{
            if( !(myFile.exists()) ){
                myFile.createNewFile();
            }
        
            ObjectOutputStream ooStream = new ObjectOutputStream(new FileOutputStream(myFile));
            ooStream.writeObject(patientQueue);
            ooStream.close();
        }
        catch(FileNotFoundException ex){
            ex.printStackTrace();
            System.out.println("\nFile not found");
        }
        catch(IOException ex){
            ex.printStackTrace();
            System.out.println("\nCannot save to file");
        }
    }
     
    public QueueInterface<Patient> readFromFile(){
        QueueInterface<Patient> patientQueue = new LinkedQueue<>();
         
        try{
            if( !(myFile.exists()) ){
                return patientQueue;
            }
             
           ObjectInputStream oiStream = new ObjectInputStream(new FileInputStream(myFile));
           patientQueue = (LinkedQueue<Patient>) (oiStream.readObject());
           oiStream.close();
        }
        catch(IOException ex){
            ex.printStackTrace();
           System.out.println("\nCannot read from file.");
        }
        catch(ClassNotFoundException ex){
            ex.printStackTrace();
           System.out.println("\nClass not found.");
        }
        finally{
           return patientQueue;
        }
    }
}
